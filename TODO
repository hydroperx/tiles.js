- [ ] Challenges: https://softwareengineering.stackexchange.com/q/458507/462552

# Arrow navigation

- [ ] Allow browsing tile focus through the arrows (input action navigateLeft/Right/Up/Down).
  - [ ] Requires an option so that the library can decide whether it has the responsibility for navigating the focus.

# Transition

While rearranging tiles:

(To stop current transition, get the interpolated cascading value of `top`/`left` and set it as the current, then run a very short timeout (5ms) to proceed.)

- [x] From -Y top to +Y (e.g. ignore X transition when changing both XY)
- [x] From +Y bottom to -Y (e.g. ignore X transition when changing both XY)

# Clipping

- [x] Set style `overflow: hidden` for group's tiles. (Won't affect the dragging-flying tile anyways.)

# API

- [x] `Tiles#inlineGroupsAvailable()` (for the vertical layout) - Returns the number of inline groups available for the given width (either in `px` or `em`).
- [x] `Tiles#inlineGroups` (for the vertical layout)
- [x] `Tiles#clear()` - Clears attached groups and tiles.
- [x] `Tiles#addGroup()`
  - [ ] Setup group draggable (contribute to `_group_draggables`) if drag is enabled.
- [x] `Tiles#addTile()`
- [x] `Tiles#removeGroup()`
  - [x] Do nothing if there's a tile or group being actively dragged.
  - [x] Destroy draggable if any
  - [x] Wait user work before removing from DOM
  - [ ] If a tile from that group is checked, trigger selection change event.
  - [x] Call `._keep_groups_contiguous()`
  - [x] Call `._deferred_rearrange()`
  - [x] Call `._deferred_state_update_signal()`
- [x] `Tiles#removeTile()`
  - [x] Set the `ATTR_REMOVING` attribute to `"true"`
  - [x] If tile is being dragged
    - [x] Nullify the LayoutTile's `button`
    - [x] Trigger drag end with a fake parameter
    - [x] Return
  - [x] Remove the button from the DOM
    - [x] Wait tile removal work before removing from DOM
  - [x] Uninstall draggable behavior
  - [x] Remove from state
  - [x] Remove from layout
  - [x] Remove from `$._buttons`
  - [ ] If checked, trigger selection change event.
  - [x] Call `._deferred_rearrange()`
  - [x] Call `._deferred_state_update_signal()`
- [ ] `Tiles#renameGroup()`
- [ ] `Tiles#moveGroup()`
  - [ ] Do nothing if there's a group or tile being actively dragged.
  - [ ] ...
  - [ ] Call `._deferred_rearrange()`
  - [ ] Call `._deferred_state_update_signal()`
- [ ] `Tiles#resizeTile()`
  - [ ] Do nothing if there's a tile being actively dragged.
  - [ ] Update the layout tile's width and height.
  - [ ] Update the tile state's size.
  - [ ] Update `ATTR_SIZE`
  - [ ] Call `._deferred_rearrange()`
  - [ ] Call `._deferred_state_update_signal()`
- [ ] `Tiles#moveTile()`
  - [ ] Do nothing if there's a tile being actively dragged.
  - [ ] ...
  - [ ] Call `._deferred_rearrange()`
  - [ ] Call `._deferred_state_update_signal()`

# Tile selection

- [ ] Allow (un)checking tiles
  - [ ] through touch long hold
  - [ ] through click long hold
  - [ ] if currently in selection mode, through a touch tap
  - [ ] if currently in selection mode, through a click
  - [ ] through the API
- [ ] Disable tile (un)checking depending on the `selectionEnabled` option.
- [ ] Provide API method for retrieving the IDs of checked tiles.
- [ ] Provide selection change events.

# Zoom

- [ ] Near view and far view modes. Vertical container is always in near view.
- [ ] Allow to zoom in/out switching between near/far view in a horizontal container, either through <kbd>Ctrl + Plus</kbd>, <kbd>Ctrl + Minus</kbd> or pinch gesture.
- [ ] When in far view, user is not allowed to interact with tiles, but rather with groups, allowing to drag-n-drop groups.

# Representation

- [x] Groups have `position: absolute`
- [x] GroupTiles have `position: relative`
- [x] Groups contain groupLabel and groupTiles
- [x] Tiles are `button` elements (of `position: absolute`) containing a tile content element. During dragging, the user may slightly scale down tile contents rather than the tile's button itself.

# Group dragging

- [ ] Groups support drag-n-drop if `dragEnabled`.
- [ ] Use filterTarget so that dragging can only happen from the label.
- [ ] Use a threshold of `"0.5em"` for the group Draggable.
- [ ] Set `ATTR_DRAGGING` in the group's div too.
- [ ] While dragging a group, for the Tiles container set `.style.pointerEvents = "none";`, set `group.style.pointerEvents = "auto"` and set `groupTiles.style.pointerEvents = "none"`.